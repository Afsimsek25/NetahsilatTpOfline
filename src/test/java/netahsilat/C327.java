package netahsilat;


import io.testproject.addon.WebExtensions;
import io.testproject.sdk.drivers.ReportingDriver;
import io.testproject.sdk.drivers.web.RemoteWebDriver;
import io.testproject.sdk.interfaces.junit5.ExceptionsReporter;
import org.junit.jupiter.api.*;
import org.junit.jupiter.params.ParameterizedTest;
import org.junit.jupiter.params.provider.Arguments;
import org.junit.jupiter.params.provider.MethodSource;
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.chrome.ChromeOptions;

import java.util.concurrent.TimeUnit;
import java.util.stream.Stream;

/**
 * This class was automatically generated by TestProject
 * Project: Quality Museum Project
 * Test: C327 Anasayfa üzerinde yer alan Duyurularım , E-Destek , E-Kılavuz butonlarının kontrol edilmesi
 * Generated by: Ahmet Furkan SIMSEK (furkan.simsek@qualitymuseum.com)
 * Generated on Wed Sep 28 14:02:20 GMT 2022.
 */
@DisplayName("C327 Anasayfa üzerinde yer alan Duyurularım , E-Destek , E-Kılavuz butonlarının kontrol edilmesi")
public class C327 implements ExceptionsReporter {
  public static WebDriver driver;

  @BeforeAll
  static void setup() throws Exception {
    driver = new RemoteWebDriver("wThDxIHw4zNaCydjAhcfe81WrQPYlMBFI7FPwUwV8M41", new ChromeOptions(), "Ahmet Furkan SIMSEK");
  }

  /**
   * In order to upload the test to TestProject need to un-comment @ArgumentsSource and set in comment the @MethodSource
   * @org.junit.jupiter.params.provider.ArgumentsSource(io.testproject.sdk.interfaces.parameterization.TestProjectParameterizer.class) */
  @DisplayName("C327 Anasayfa üzerinde yer alan Duyurularım , E-Destek , E-Kılavuz butonlarının kontrol edilmesi")
  @ParameterizedTest
  @MethodSource("provideParameters")
  void execute(String ApplicationURL, String userName, String password, String sonIslemlerTutar,
      String txToplamSatis, String odemeBilgileri, String odemeTutari, String curentDateTime,
      String birHaftaOncesiDateTime, String birAyOnceDataTime, String hatfaninGunu, String ayinGunu,
      String EDestekURL, String EKilavuzURL) throws Exception {
    // set timeout for driver actions (similar to step timeout)
    driver.manage().timeouts().implicitlyWait(15000, TimeUnit.MILLISECONDS);
    By by;
    boolean booleanResult;
    MethodLogoutlogin methodlogoutlogin;
    String string;
    WebExtensions.GetElementAttribute getElementAttribute;

    // 1. Run Method Logout&Login
    GeneratedUtils.sleep(500);
    methodlogoutlogin = new MethodLogoutlogin();
    methodlogoutlogin.ApplicationURL = ApplicationURL;
    methodlogoutlogin.userName = ProjectParameters.genelEmail;
    methodlogoutlogin.password = ProjectParameters.genelPassword;
    methodlogoutlogin.execute(driver);

    // 2. Click 'Duyurularım'
    GeneratedUtils.sleep(500);
    by = By.xpath("//a[. = 'Duyurularım']");
    driver.findElement(by).click();

    // 3. Is 'AnnouncementType' visible?
    GeneratedUtils.sleep(500);
    by = By.cssSelector("#AnnouncementType");
    driver.findElement(by).isDisplayed();

    // 4. Is 'E-Destek Target Blank' visible?
    GeneratedUtils.sleep(500);
    by = By.xpath("//a[contains(text(),'E-Destek')][@target='_blank']");
    driver.findElement(by).isDisplayed();

    // 5. Is 'E-Kılavuz Target Blank' visible?
    GeneratedUtils.sleep(500);
    by = By.xpath("//a[contains(text(),'E-Kılavuz')][@target='_blank']");
    driver.findElement(by).isDisplayed();

    // 6. Get 'href' attribute value on 'E-Destek'
    GeneratedUtils.sleep(500);
    getElementAttribute = WebExtensions.getElementAttribute("href");
    by = By.xpath("//a[. = 'E-Destek']");
    getElementAttribute = (WebExtensions.GetElementAttribute)((ReportingDriver)driver).addons().execute(getElementAttribute, by, -1);
    EDestekURL = String.valueOf(getElementAttribute.attributeValue);

    // 7. Get 'href' attribute value on 'E-Kılavuz'
    GeneratedUtils.sleep(500);
    getElementAttribute = WebExtensions.getElementAttribute("href");
    by = By.xpath("//a[. = 'E-Kılavuz']");
    getElementAttribute = (WebExtensions.GetElementAttribute)((ReportingDriver)driver).addons().execute(getElementAttribute, by, -1);
    EKilavuzURL = String.valueOf(getElementAttribute.attributeValue);

    // 8. Navigate to '{{EDestekURL}}'
    GeneratedUtils.sleep(500);
    driver.navigate().to(EDestekURL);

    // 9. Is 'Giriş1' visible?
    GeneratedUtils.sleep(500);
    by = By.cssSelector("#js-login-submit");
    driver.findElement(by).isDisplayed();

    // 10. Navigate to '{{EKilavuzURL}}'
    GeneratedUtils.sleep(500);
    driver.navigate().to(EKilavuzURL);

    // 11. Is 'Netahsilat Online Eğitim Platformuna ...' visible?
    GeneratedUtils.sleep(500);
    by = By.xpath("//h1[. = 'Netahsilat Online Eğitim Platformuna Hoşgeldiniz']");
    driver.findElement(by).isDisplayed();

    // 12. Get current URL
    GeneratedUtils.sleep(500);
    string = driver.getCurrentUrl();
    Assertions.assertEquals("https://netahsilat.com/egitim/", string);

  }

  @Override
  public ReportingDriver getDriver() {
    return (ReportingDriver) driver;
  }

  @AfterAll
  static void tearDown() {
    if (driver != null) {
      driver.quit();
    }
  }

  private static Stream provideParameters() throws Exception {
    return Stream.of(Arguments.of("https://otomasyon.netahsilatdemo.com/Account/LogOff","","","","","","","","","","","","",""));
  }
}
