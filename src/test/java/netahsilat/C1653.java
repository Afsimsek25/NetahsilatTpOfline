package netahsilat;

import io.testproject.addon.JSActions;
import io.testproject.addon.NetahsilatUtills;
import io.testproject.addon.WebExtensions;
import io.testproject.sdk.drivers.ReportingDriver;
import io.testproject.sdk.drivers.web.RemoteWebDriver;
import io.testproject.sdk.interfaces.junit5.ExceptionsReporter;
import org.junit.jupiter.api.AfterAll;
import org.junit.jupiter.api.BeforeAll;
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.params.ParameterizedTest;
import org.junit.jupiter.params.provider.Arguments;
import org.junit.jupiter.params.provider.MethodSource;
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.chrome.ChromeOptions;
import org.openqa.selenium.interactions.Actions;
import org.openqa.selenium.support.ui.ExpectedConditions;
import org.openqa.selenium.support.ui.WebDriverWait;

import java.util.concurrent.TimeUnit;
import java.util.stream.Stream;

/**
 * This class was automatically generated by TestProject
 * Project: Quality Museum Project
 * Test: C1653 Pos içerisine 1 den 12 ye kadar taksit ekleyebilme,varlığını kontrol etme
 * Generated by: Ahmet Furkan SIMSEK (furkan.simsek@qualitymuseum.com)
 * Generated on Fri Oct 07 11:27:50 GMT 2022.
 */
@DisplayName("C1653 Pos içerisine 1 den 12 ye kadar taksit ekleyebilme,varlığını kontrol etme")
public class C1653 implements ExceptionsReporter {
  public static WebDriver driver;

  @BeforeAll
  static void setup() throws Exception {
    driver = new RemoteWebDriver("wThDxIHw4zNaCydjAhcfe81WrQPYlMBFI7FPwUwV8M41", new ChromeOptions(), "Ahmet Furkan SIMSEK");
  }

  /**
   * In order to upload the test to TestProject need to un-comment @ArgumentsSource and set in comment the @MethodSource
   * @org.junit.jupiter.params.provider.ArgumentsSource(io.testproject.sdk.interfaces.parameterization.TestProjectParameterizer.class) */
  @DisplayName("C1653 Pos içerisine 1 den 12 ye kadar taksit ekleyebilme,varlığını kontrol etme")
  @ParameterizedTest
  @MethodSource("provideParameters")
  void execute(String ApplicationURL, String userName, String password) throws Exception {
    // set timeout for driver actions (similar to step timeout)
    driver.manage().timeouts().implicitlyWait(15000, TimeUnit.MILLISECONDS);
    By by;
    boolean booleanResult;
    MethodLogoutlogin methodlogoutlogin;
    WebExtensions.SelectOptionbyVisibleText selectOptionbyVisibleText;
    JSActions.ClickAction clickAction;
    NetahsilatUtills.ClickUntilGone clickUntilGone;

    // 1. Run Method Logout&Login
    GeneratedUtils.sleep(500);
    methodlogoutlogin = new MethodLogoutlogin();
    methodlogoutlogin.ApplicationURL = ApplicationURL;
    methodlogoutlogin.userName = ProjectParameters.genelEmail;
    methodlogoutlogin.password = ProjectParameters.genelPassword;
    methodlogoutlogin.execute(driver);

    // 2. Click 'SANAL POSLAR'
    clickAction = JSActions.getClickAction();
    by = By.xpath("//a[. = 'SANAL POSLAR']");
    clickAction = (JSActions.ClickAction)((ReportingDriver)driver).addons().execute(clickAction, by, -1);

    // 3. Is 'btnRefreshGrid' visible?
    by = By.cssSelector("a[class='t-icon t-refresh']");
    driver.findElement(by).isDisplayed();

    // 4. Move mouse to 'Sayfalama Butonu'
    by = By.cssSelector("span[class='t-input']");
    (new Actions(driver)).moveToElement(driver.findElement(by)).perform();

    // 5. Click 'Sayfalama Butonu'
    clickAction = JSActions.getClickAction();
    by = By.cssSelector("span[class='t-input']");
    clickAction = (JSActions.ClickAction)((ReportingDriver)driver).addons().execute(clickAction, by, -1);

    // 6. Is 'isRefresh' visible?
    by = By.cssSelector("a[class='t-icon t-refresh']");
    driver.findElement(by).isDisplayed();

    // 7. Click 'Grid 500 Liste'
    clickAction = JSActions.getClickAction();
    by = By.xpath("//div[@class = 't-animation-container' and contains(@style, 'display: block;')]//li[. = '500']");
    clickAction = (JSActions.ClickAction)((ReportingDriver)driver).addons().execute(clickAction, by, -1);

    // 8. Click 'Yeni Sanal Pos Ekle'
    by = By.xpath("//a[. = 'Yeni Sanal Pos Ekle']");
    driver.findElement(by).click();

    // 9. Click 'Banka Posları Radio Button'
    by = By.cssSelector("input[type='radio'][name='PosApiTypeSystemId'][value='10']");
    driver.findElement(by).click();

    // 10. Type 'C1653 Otomasyon posu (Silinen)' in 'Name'
    by = By.cssSelector("#Name");
    driver.findElement(by).sendKeys("C1653 Otomasyon posu (Silinen)");

    // 11. Type 'C1653 - Otomasyon tarafından oluşturulup silinen pos' in 'Explanation'
    by = By.cssSelector("#Explanation");
    driver.findElement(by).sendKeys("C1653 - Otomasyon tarafından oluşturulup silinen pos");

    // 12. Select options in 'VPosApiCurrencyId' with text '[NONE]'
    selectOptionbyVisibleText = WebExtensions.selectOptionbyVisibleText("TL");
    by = By.cssSelector("#VPosApiCurrencyId");
    selectOptionbyVisibleText = (WebExtensions.SelectOptionbyVisibleText)((ReportingDriver)driver).addons().execute(selectOptionbyVisibleText, by, -1);

    // 13. Is 'VPosApiId' is clickable?
    //    Sanal Pos seçim alanı disabled kontrolü
    by = By.cssSelector("#VPosApiId");
    (new WebDriverWait(driver, 15)).until(ExpectedConditions.elementToBeClickable(by));

    // 14. Select options in 'VPosApiId' with text '[NONE]'
    //    Garanti
    selectOptionbyVisibleText = WebExtensions.selectOptionbyVisibleText("Garanti");
    by = By.cssSelector("#VPosApiId");
    selectOptionbyVisibleText = (WebExtensions.SelectOptionbyVisibleText)((ReportingDriver)driver).addons().execute(selectOptionbyVisibleText, by, -1);

    // 15. Click 'Sanal Pos Logo Seçim : Bonus'
    by = By.xpath("//ul[@id='logo-list']//img[contains(@src,'bonus.png')]");
    driver.findElement(by).click();

    // 16. Click '3D aktif'
    by = By.xpath("//label[@for='Is3DAvailable']/..//..//img");
    driver.findElement(by).click();

    // 17. Click 'CVV Kullanılsın'
    by = By.xpath("//label[@for='IsCVVUse']/..//..//img");
    driver.findElement(by).click();

    // 18. Click 'Aktif'
    by = By.xpath("//label[@for='IsActive']/..//..//img");
    driver.findElement(by).click();

    // 19. Is 'Komisyon Oranları' visible?
    by = By.cssSelector("a[href='#tab-comission']");
    driver.findElement(by).isDisplayed();

    // 20. Click 'Komisyon Oranları'
    by = By.cssSelector("a[href='#tab-comission']");
    driver.findElement(by).click();

    // 21. Type '1' in 'Installment'
    by = By.cssSelector("[name='Installment']");
    driver.findElement(by).sendKeys("1");

    // 22. Type '1,2' in 'CommRate6'
    by = By.cssSelector("[name='CommRate']");
    driver.findElement(by).sendKeys("1,2");

    // 23. Click 'TaksitEKle'
    by = By.cssSelector("input[value='Ekle']");
    driver.findElement(by).click();

    // 24. Type '2' in 'Installment'
    by = By.cssSelector("[name='Installment']");
    driver.findElement(by).sendKeys("2");

    // 25. Type '1,2' in 'CommRate6'
    by = By.cssSelector("[name='CommRate']");
    driver.findElement(by).sendKeys("1,2");

    // 26. Click 'TaksitEKle'
    by = By.cssSelector("input[value='Ekle']");
    driver.findElement(by).click();

    // 27. Type '3' in 'Installment'
    by = By.cssSelector("[name='Installment']");
    driver.findElement(by).sendKeys("3");

    // 28. Type '1,2' in 'CommRate6'
    by = By.cssSelector("[name='CommRate']");
    driver.findElement(by).sendKeys("1,2");

    // 29. Click 'TaksitEKle'
    by = By.cssSelector("input[value='Ekle']");
    driver.findElement(by).click();

    // 30. Type '4' in 'Installment'
    by = By.cssSelector("[name='Installment']");
    driver.findElement(by).sendKeys("4");

    // 31. Type '1,2' in 'CommRate6'
    by = By.cssSelector("[name='CommRate']");
    driver.findElement(by).sendKeys("1,2");

    // 32. Click 'TaksitEKle'
    by = By.cssSelector("input[value='Ekle']");
    driver.findElement(by).click();

    // 33. Type '5' in 'Installment'
    by = By.cssSelector("[name='Installment']");
    driver.findElement(by).sendKeys("5");

    // 34. Type '1,2' in 'CommRate6'
    by = By.cssSelector("[name='CommRate']");
    driver.findElement(by).sendKeys("1,2");

    // 35. Click 'TaksitEKle'
    by = By.cssSelector("input[value='Ekle']");
    driver.findElement(by).click();

    // 36. Type '6' in 'Installment'
    by = By.cssSelector("[name='Installment']");
    driver.findElement(by).sendKeys("6");

    // 37. Type '1,2' in 'CommRate6'
    by = By.cssSelector("[name='CommRate']");
    driver.findElement(by).sendKeys("1,2");

    // 38. Click 'TaksitEKle'
    by = By.cssSelector("input[value='Ekle']");
    driver.findElement(by).click();

    // 39. Type '7' in 'Installment'
    by = By.cssSelector("[name='Installment']");
    driver.findElement(by).sendKeys("7");

    // 40. Type '1,2' in 'CommRate6'
    by = By.cssSelector("[name='CommRate']");
    driver.findElement(by).sendKeys("1,2");

    // 41. Click 'TaksitEKle'
    by = By.cssSelector("input[value='Ekle']");
    driver.findElement(by).click();

    // 42. Type '8' in 'Installment'
    by = By.cssSelector("[name='Installment']");
    driver.findElement(by).sendKeys("8");

    // 43. Type '1,2' in 'CommRate6'
    by = By.cssSelector("[name='CommRate']");
    driver.findElement(by).sendKeys("1,2");

    // 44. Click 'TaksitEKle'
    by = By.cssSelector("input[value='Ekle']");
    driver.findElement(by).click();

    // 45. Type '9' in 'Installment'
    by = By.cssSelector("[name='Installment']");
    driver.findElement(by).sendKeys("9");

    // 46. Type '1,2' in 'CommRate6'
    by = By.cssSelector("[name='CommRate']");
    driver.findElement(by).sendKeys("1,2");

    // 47. Click 'TaksitEKle'
    by = By.cssSelector("input[value='Ekle']");
    driver.findElement(by).click();

    // 48. Type '10' in 'Installment'
    by = By.cssSelector("[name='Installment']");
    driver.findElement(by).sendKeys("10");

    // 49. Type '1,2' in 'CommRate6'
    by = By.cssSelector("[name='CommRate']");
    driver.findElement(by).sendKeys("1,2");

    // 50. Click 'TaksitEKle'
    by = By.cssSelector("input[value='Ekle']");
    driver.findElement(by).click();

    // 51. Type '11' in 'Installment'
    by = By.cssSelector("[name='Installment']");
    driver.findElement(by).sendKeys("11");

    // 52. Type '1,2' in 'CommRate6'
    by = By.cssSelector("[name='CommRate']");
    driver.findElement(by).sendKeys("1,2");

    // 53. Click 'TaksitEKle'
    by = By.cssSelector("input[value='Ekle']");
    driver.findElement(by).click();

    // 54. Type '12' in 'Installment'
    by = By.cssSelector("[name='Installment']");
    driver.findElement(by).sendKeys("12");

    // 55. Type '1,2' in 'CommRate6'
    by = By.cssSelector("[name='CommRate']");
    driver.findElement(by).sendKeys("1,2");

    // 56. Click 'TaksitEKle'
    by = By.cssSelector("input[value='Ekle']");
    driver.findElement(by).click();

    // 57. Run Click Until Gone
    clickUntilGone = NetahsilatUtills.clickUntilGone(30);
    by = By.xpath("//button[. = 'Tamam']");
    clickUntilGone = (NetahsilatUtills.ClickUntilGone)((ReportingDriver)driver).addons().execute(clickUntilGone, by, -1);

    // 58. Is '//td[text()='C1653 Otomasyon posu (Silinen)']' visible?
    by = By.xpath("//td[text()='C1653 Otomasyon posu (Silinen)']");
    driver.findElement(by).isDisplayed();

    // 59. Click '//td[text()='C1653 Otomasyon posu (Silinen)']/..//a[@title='Sanal Pos Güncelle']//img'
    by = By.xpath("//td[text()='C1653 Otomasyon posu (Silinen)']/..//a[@title='Sanal Pos Güncelle']//img");
    driver.findElement(by).click();

    // 60. Click 'Komisyon Oranları'
    by = By.cssSelector("a[href='#tab-comission']");
    driver.findElement(by).click();

    // 61. Is '1.Taksit Oranları' visible?
    by = By.xpath("//div[@class='item columns commRateItem'][1]//div//span[text()='1']");
    driver.findElement(by).isDisplayed();

    // 62. Is '2.Taksit Oranları' visible?
    by = By.xpath("//div[@class='item columns commRateItem'][2]//div//span[text()='2']");
    driver.findElement(by).isDisplayed();

    // 63. Is '3. Taksit Oranları' visible?
    by = By.xpath("//div[@class='item columns commRateItem'][3]//div//span[text()='3']");
    driver.findElement(by).isDisplayed();

    // 64. Is '4. Taksit Oranları' visible?
    by = By.xpath("//div[@class='item columns commRateItem'][4]//div//span[text()='4']");
    driver.findElement(by).isDisplayed();

    // 65. Is '5. Taksit Oranları' visible?
    by = By.xpath("//div[@class='item columns commRateItem'][5]//div//span[text()='5']");
    driver.findElement(by).isDisplayed();

    // 66. Is '6. Taksit Oranları' visible?
    by = By.xpath("//div[@class='item columns commRateItem'][6]//div//span[text()='6']");
    driver.findElement(by).isDisplayed();

    // 67. Is '7.  Taksit Oranları' visible?
    by = By.xpath("//div[@class='item columns commRateItem'][7]//div//span[text()='7']");
    driver.findElement(by).isDisplayed();

    // 68. Is '8. Taksit Oranları' visible?
    by = By.xpath("//div[@class='item columns commRateItem'][8]//div//span[text()='8']");
    driver.findElement(by).isDisplayed();

    // 69. Is '9. Taksit Oranları' visible?
    by = By.xpath("//div[@class='item columns commRateItem'][9]//div//span[text()='9']");
    driver.findElement(by).isDisplayed();

    // 70. Is '10. Taksit Oranları' visible?
    by = By.xpath("//div[@class='item columns commRateItem'][10]//div//span[text()='10']");
    driver.findElement(by).isDisplayed();

    // 71. Is '11. Taksit Oranları' visible?
    by = By.xpath("//div[@class='item columns commRateItem'][11]//div//span[text()='11']");
    driver.findElement(by).isDisplayed();

    // 72. Is '12. Taksit Oranları' visible?
    by = By.xpath("//div[@class='item columns commRateItem'][12]//div//span[text()='12']");
    driver.findElement(by).isDisplayed();

    // 73. Click 'Vazgeç'
    by = By.xpath("//button[. = 'Vazgeç']");
    driver.findElement(by).click();

    // 74. Is '//td[text()='C1653 Otomasyon posu (Silinen)']' visible?
    by = By.xpath("//td[text()='C1653 Otomasyon posu (Silinen)']");
    driver.findElement(by).isDisplayed();

    // 75. Click 'C1653 Otomasyon posu (Silinen)'
    by = By.xpath("//td[text()='C1653 Otomasyon posu (Silinen)']/..//a[@title='Sil']//img");
    driver.findElement(by).click();

    // 76. Run Click Until Gone
    clickUntilGone = NetahsilatUtills.clickUntilGone(30);
    by = By.xpath("//button[. = 'Tamam']");
    clickUntilGone = (NetahsilatUtills.ClickUntilGone)((ReportingDriver)driver).addons().execute(clickUntilGone, by, -1);

  }

  @Override
  public ReportingDriver getDriver() {
    return (ReportingDriver) driver;
  }

  @AfterAll
  static void tearDown() {
    if (driver != null) {
      driver.quit();
    }
  }

  private static Stream provideParameters() throws Exception {
    return Stream.of(Arguments.of("https://otomasyon.netahsilatdemo.com/Account/LogOff","otomasyon@test.com","Kd!cyhz4"));
  }
}
